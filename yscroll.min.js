(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){module.exports=t()}else{e.YScroll=t()}})(this,function(){var e=window,t=document,r=Math.round,n=Math.abs;var i=function(e,t){var i=this,s=t.createElement("div"),a=["webkit"],o={};var c=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};var l=function(e,t){for(var r=0,n=e.length;r<n;r++){if(t(e[r],r)){return true}}return false};var u=function(e){if(s.style[e]!==undefined){return e}else{var t;l(a,function(r){var n=c(r)+c(e);if(s.style[n]!==undefined){t="-"+r+"-"+e;return true}});return t}};var f=function(e,t,r){var n=o[t];if(n){e[n]=r}else if(e[t]!==undefined){o[t]=t;e[t]=r}else{l(a,function(n){var i=c(n)+c(t);if(e[i]!==undefined){o[t]=i;e[i]=r;return true}})}};var v=function(e){return l(e,function(e){return s.style[e]!==undefined})};i.some=l;i.getCSSVal=u;i.setStyle=f;i.saveProp=o;i.hasProp=v;i.transform3d=v(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);i.transform=v(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);i.transition=v(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]);i.cssAnimation=(i.transform3d||i.transform)&&i.transition;i.getTriangleSide=function(e,t,r,i){var s=n(e-r);var a=n(t-i);var o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2));return{x:s,y:a,z:o}};i.getAngle=function(e){var t=e.y/e.z;var r=Math.acos(t);return 180/(Math.PI/r)};i.momentum=function(e,t,i,s,a,o){var c=e-t,l=n(c)/i,u=6e-4,f,v;f=e+l*l/(2*u)*o;v=l/u;if(f<s){f=a?s-a/2.5*(l/8):s;c=n(f-e);v=c/l}else if(f>0){f=a?a/2.5*(l/8):0;c=n(e)+f;v=c/l}return{dist:r(f),duration:v}};return i}(e,t,undefined);function s(e,t){return this instanceof s?this.init.call(this,e,t):new s(e,t)}s.prototype={constructor:s,ease:{quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)",back:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",elastic:"cubic-bezier(0, 0, 0.25, 1)"},DISTANCE_THRESHOLD:5,ANGLE_THREHOLD:55,init:function(e,r){var n=this;if(typeof e==="string"&&e!==""){e=t.querySelector(e)}if(!e){throw new Error("element not found")}r=r||{};n.distance=r.distance;n.bounceTime=r.bounceTime||350;n.isScroll=r.distance===undefined?true:false;n.curDist=0;n.gestureStart=false;n.events={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel",transitionend:i.hasProp(["transition"])?"transitionend":"webkitTransitionEnd"};n.cssAnimation=r.cssAnimation===undefined?i.cssAnimation:r.cssAnimation;if(n.isScroll){n.scroller=e.children[0];n.wrapperWidth=e.clientWidth;n.maxDist=n.wrapperWidth-n.scroller.clientWidth;n.scroller.addEventListener(n.events.transitionend,n,false);n.bounceEasing=n.ease["quadratic"]}else{n.scroller=e;n.curPoint=0;n.maxPoint=e.children.length-1;n.maxDist=-n.distance*(n.maxPoint-1);n.bounceEasing=n.ease["elastic"]}n.scrollerStyle=n.scroller.style;if(n.cssAnimation){n._setStyle({transitionProperty:i.getCSSVal("transform"),transitionTimingFunction:n.bounceEasing,transitionDuration:"0ms",transform:n._getTranslate(0,0)})}else{n._setStyle({position:"relative",left:"0px",top:"0px"})}n.scroller.addEventListener(n.events.start,n,false);return n},handleEvent:function(e){var t=this,r=t.events;switch(e.type){case r.start:t._start(e);break;case r.move:t._move(e);break;case r.end:t._end(e);break;case r.cancel:t._end(e);break;case r.transitionend:t._transitionEnd(e);break;case"click":t._click(e);break}},_start:function(e){var r=this;if(r.scrolling){return}r.scroller.addEventListener(r.events.move,r,false);t.addEventListener(r.events.end,r,false);if(r.cssAnimation){r._setStyle({transitionDuration:"0ms"})}var n=e.changedTouches?e.changedTouches[0]:e;r.startPageX=n.pageX;r.startPageY=n.pageY;r.basePageX=r.startPageX;r.basePageY=r.startPageY;r.direction=0;r.scrolling=true;r.moveReady=false;r.startTime=e.timeStamp;r.endTime=0;r._triggerEvent("sTouchstart",true,false)},_move:function(e){var t=this;if(!t.scrolling){return}var n=e.changedTouches?e.changedTouches[0]:e,s=n.pageX,a=n.pageY;if(t.moveReady){e.preventDefault();var o=s-t.basePageX,c=t.curDist+o;if(c>=0||c<t.maxDist){c=r(t.curDist+o/3)}var l=o>0?1:-1;var u=!t._triggerEvent("sTouchmove",true,true,{delta:o,direction:l});t.direction=l;if(u){t._touchAfter({moved:false,cancelled:true})}else{var f=[c,0];t._setDist.apply(t,f)}}else{var v=i.getTriangleSide(t.startPageX,t.startPageY,s,a);if(v.z>t.DISTANCE_THRESHOLD){if(i.getAngle(v)>t.ANGLE_THREHOLD){e.preventDefault();t.moveReady=true;t.scroller.addEventListener("click",t,true)}else{t.scrolling=false}}}t.basePageX=s;t.basePageY=a},_end:function(e){var r=this;r.scroller.removeEventListener(r.events.move,r,false);t.removeEventListener(r.events.end,r,false);if(!r.scrolling){return}if(r.isScroll){if(!r.resetDist()){var s=e.timeStamp,a=s-r.startTime,o=0,c=r.basePageX,l=n(c-r.startPageX);if(a<300&&l>30){var u=i.momentum(r.basePageX,r.startPageX,a,r.maxDist,r.wrapperWidth,r.direction);c=u.dist;o=u.duration;r.isInTransition=1;if(!r.cssAnimation){if(c>=0){c=0}else if(c<r.maxDist){c=r.maxDist}}}if(r.basePageX!=c){r._scrollTo(c,0,o);r.isInTransition=!!(o>0)}}}else{var f=-r.curDist/r.distance;f=r.direction<0?Math.ceil(f):r.direction>0?Math.floor(f):Math.round(f);if(f<0){f=0}else if(f>r.maxPoint){f=r.maxPoint}r.moveToPoint(f)}r._touchAfter({moved:false,cancelled:false})},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller||!t.isInTransition){return}if(t.resetDist()){t.isInTransition=false}},_click:function(e){e.preventDefault();e.stopPropagation()},enable:function(){this.enabled=true},disable:function(){this.enabled=false},destroy:function(){var e=this;e.scroller.removeEventListener(e.events.start,e,false)},_triggerEvent:function(e,r,n,i){var s=this,a=t.createEvent("Event");a.initEvent(e,r,n);if(i){for(var o in i){if(i.hasOwnProperty(o)){a[o]=i[o]}}}return s.scroller.dispatchEvent(a)},_touchAfter:function(e){var t=this;t.scrolling=false;t.moveReady=false;t.startTime=0;setTimeout(function(){t.scroller.removeEventListener("click",t,true)},200);t._triggerEvent("sTouchend",true,false,e)},_getTranslate:function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"},_setStyle:function(e){var t=this,r=t.scrollerStyle;for(var n in e){i.setStyle(r,n,e[n])}},_setDist:function(e,t){var r=this,n=r.scrollerStyle,s=e;if(r.cssAnimation){n[i.saveProp.transform]=r._getTranslate(e,t)}else{n.left=s+"px"}r.curDist=s},_scrollTo:function(e,t,r){var n=this;r=r||0;if(n.cssAnimation){n.scrollerStyle[i.saveProp.transitionDuration]=r+"ms";n._setDist(e,t)}else{n._animDist=n.curDist;n._animate(e,r||n.bounceTime);n.curDist=e}},_animate:function(e,t){var r=this,n=r.scroller,i=r.scroller.style,s=+new Date,a=parseInt(t,10),o=r._animDist;var c=function(e,t){return-(e/=t)*(e-2)};var l=setInterval(function(){var t=+new Date-s;var n;if(t>a){clearInterval(l);o=e;r._animDist=e}else{n=c(t,a);o=n*(e-o)+o}if(r.vertical){i.top=o+"px"}else{i.left=o+"px"}},10)},resetDist:function(){var e=this,t=e.curDist;if(t>0){t=0}else if(t<e.maxDist){t=e.maxDist}if(t==e.curDist){return false}e._setDist(t,0);return true},moveToPoint:function(e,t,r){var n=this,i=n.curPoint;e=e===undefined?n.curPoint:parseInt(e,10);t=t===undefined?n.bounceTime:parseInt(t,10);if(e<0){e=0}else if(e>n.maxPoint){e=n.maxPoint}n.curPoint=e;if(i!=n.curPoint){n._triggerEvent("sPointmove",true,false,{prevPoint:i,curPoint:n.curPoint})}n._scrollTo(-n.curPoint*n.distance,0,t);r&&r()}};return s});